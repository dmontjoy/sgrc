
<div id="enlace_habilitar_reclamo_simple" style="display:none;"> <a href="javascript:habilitar_registrar_reclamo()">Nuevo Reclamo [ + ] </a></div>

<div id="reclamo_stakeholder" >
    <div id="reclamo_stakeholder_simple" >

        <table width="100%" style="float:left;">
            <tr>
                <td colspan="2">
                    <form id="guardar_reclamo_stakeholder"  enctype="multipart/form-data">
                        <!--
                        <input type="hidden" name="idreclamo_complejo_sh" id="idreclamo_sh" value={idreclamo_sh} />
                        <input type="hidden" name="idreclamo_complejo_rc" id="idreclamo_rc" value={idreclamo_rc} />
                        -->
                                                
                        <input type="hidden" id="op_reclamo" name="op_reclamo" value="guardar_reclamo_stakeholder" />
                        <table width="100%" border="0">
                             <tr>
                                <td colspan="2" align="justify">
                                    <textarea minlength="2" required name="reclamo" id="reclamo" style="width:100%;" rows="5">{reclamo}</textarea>
                                </td>
                            </tr>
                             <tr>
                                <td colspan="2">
                                    <table width="100%">
                                        <tr>
                                             <td>
                                                Fecha
                                                <input type="text" name="fecha_reclamo" id="fecha_reclamo" value="{fecha_reclamo}" size="10"/>
                                            </td>
                                            <td>
                                            </td>

                                            <td>
                                            </td>

                                            <td>
                                                Tipo
                                                <select name="idreclamo_tipo" id="idreclamo_tipo">
                                                    <!-- INICIO BLOQUE : reclamo_tipo -->
                                                    <option value={idreclamo_tipo} {selected}>{tipo}</option>
                                                    <!-- FIN BLOQUE : reclamo_tipo -->
                                                </select>
                                            </td>
                                        </tr>
                                    </table>
                                </td>
                            </tr>

                            <tr>
                                <td colspan="2" align="left">
                                    <table>
                                        <tr>
                                            <td>

                                                <input type="text" class="buscar"  name="buscar_reclamo_tag" id="buscar_reclamo_tag" onfocus="borrar_reclamo_tag();
                            busqueda_rapida_reclamo_tag();" value=" Buscar tag" size="20"  >
                                                    <img id="img_buscar_reclamo_tag"  src="../../../img/serach.png" style="width:auto; height:auto;vertical-align: middle;"/>

                                            </td>
                                            <td>
                                                <table id="reclamo_tag"  width="100%">
                                       
                                                </table>
                                            </td>

                                        </tr>
                                    </table>

                                </td>
                            </tr>
                            <tr>
                                <td>


                                    <input type="hidden" id="nume_celda_reclamo_tag" name="nume_celda_reclamo_tag" value="0" />
                                    <input type="hidden" id="nume_fila_reclamo_tag" name="nume_fila_reclamo_tag" value="0" />

                                    
                                </td>
                            </tr>
                            
                                     <tr id="fila_reclamo_sh" style="display:none;">
                                        
                                        <td>
                                            <table>
                                                <tr>
                                                    <td >
                                                        <input type="hidden" id="nume_celda_reclamo_sh" name="nume_celda_reclamo_sh" value="2" />
                                                        <input type="hidden" id="nume_fila_reclamo_sh" name="nume_fila_reclamo_sh" value="1" />
                                                        <input type="text" class="buscar" name="reclamo_sh_buscar" id="reclamo_sh_buscar" onfocus="borrar_reclamo_sh_buscar();
                        busqueda_rapida_reclamo_sh_buscar()" value="Buscar Reclamante (stakeholder) por apellido paterno apellido materno nombre"  size="80"  width="100px">
                                                         <img id="img_buscar_reclamo_sh"  src="../../../img/serach.png" style="width:auto; height:auto;vertical-align: middle;"/>
                                                         <input type="hidden" test="SH" value="{cant_sh}" id="count_sh" name="count_sh" />
                                                    </td>
                                                </tr>

                                            </table>
                                    <table width="100%" class="borde" id="reclamo_sh">
                                         <!-- INICIO BLOQUE : tr_sh_reclamo -->
                                                <tr>
                                                    <!-- INICIO BLOQUE : td_sh_reclamo -->

                                                    <td width="10%" id="reclamo_sh{celda_nume_fila_sh}{celda_nume_celda_sh}">
                                                        <a href="javascript:ver_datos_stakeholder('{idsh}---{idmodulo}---1')">{sh}</a>

                                                        <!-- INICIO BLOQUE : idreclamo_complejo_sh -->
                                                        <input type="hidden" name="idreclamo_complejo_sh[]" id="idreclamo_sh{celda_nume_fila_sh}{celda_nume_celda_sh}" value={idreclamo_complejo_sh} />
                                                        <!-- FIN BLOQUE : idreclamo_complejo_sh -->

                                                    </td>
                                                    <td id="ereclamo_sh{celda_nume_fila_sh}{celda_nume_celda_sh}">&nbsp;
                                                        <!-- INICIO BLOQUE : eliminar_sh_reclamo -->


                                                        <img src="../../../img/trash.png"  title="Eliminar" alt="Borrar" width="16" height="16" border="0" class="icono" onclick="disminuye_celda('reclamo_sh{celda_nume_fila_sh}{celda_nume_celda_sh}','count_sh')" >

                                                        <!-- FIN BLOQUE : eliminar_sh_reclamo -->

                                                    </td>
                                                    <!-- FIN BLOQUE : td_sh_reclamo -->

                                                </tr>
                                                <!-- FIN BLOQUE : tr_sh_reclamo -->
                                    </table>

                                </td>
                            </tr>
                            <tr id="fila_reclamo_rc1" style="display:none;">
                                        
                                        <td>
                                            <table>
                                                <tr>
                                                    <td >
                                                        
                                                        <input type="text" class="buscar" name="reclamo_rc1_buscar" id="reclamo_rc1_buscar" onfocus="borrar_reclamo_rc1_buscar();
                        busqueda_rapida_reclamo_rc1_buscar()" value="Buscar Receptor (relacionista) por apellido nombre"  size="50"  width="50px">
                                                         <img id="img_buscar_reclamo_rc1"  src="../../../img/serach.png" style="width:auto; height:auto;vertical-align: middle;"/>
                                                         <input id="count_receptor" type="hidden" name="count_receptor" value="{count_receptor}" test="RC">
                                                    </td>
                                               
                                                    <td>
                                                        <div id="reclamo_receptor">
                                                            
                                                            <!-- INICIO BLOQUE : receptor -->
                                                            
                                                            {rc}<img src="../../../img/trash.png" title="Eliminar" width="16" height="16" border="0" class="icono" style="margin-left:10px;vertical-align: middle;" onclick="borrar_receptor()">
                                                            <input type="hidden" name="idreclamo_rc" id="idreclamo_rc" value="{idrc}---{idmodulo_rc}---{idpersona_tipo}"/>
                                                            
                                                            <!-- FIN BLOQUE : receptor -->
                                                           
                                                        </div>
                                                         
                                                    </td>
                                                </tr>

                                            </table>                                    
                                </td>
                            </tr>
                            <tr id="fila_reclamo_rc2" style="display:none;">
                                    
                                    <td>

                                        <table>
                                            <tr>
                                                <td >
                                                    <input type="hidden" id="nume_celda_reclamo_rc" name="nume_celda_reclamo_rc" value="0" />
                                                    <input type="hidden" id="nume_fila_reclamo_rc" name="nume_fila_reclamo_rc" value="0" />


                                                    <input type="text" class="buscar" name="reclamo_rc2_buscar" id="reclamo_rc2_buscar" onfocus="borrar_reclamo_rc2_buscar();
                busqueda_rapida_reclamo_rc2_buscar()" value="Buscar Responsable (relacionista) por apellido nombre"  size="80"  width="80px">
                                                    <img id="img_buscar_reclamo_rc2"  src="../../../img/serach.png" style="width:auto; height:auto;vertical-align: middle;"/>
                                                    <input type="hidden"  value="0" id="count_rc" name="count_rc" />
                                                </td>
                                            </tr>

                                        </table>
                                        <table width="100%" class="borde" id="reclamo_rc">
                                            <!-- INICIO BLOQUE : tr_rc_interaccion -->
                                                <tr>
                                                    <!-- INICIO BLOQUE : td_rc_interaccion -->

                                                    <td width="10%" id="reclamo_rc{celda_nume_fila_rc}{celda_nume_celda_rc}">
                                                        {rc}
                                                        <!-- INICIO BLOQUE : idinteraccion_complejo_rc -->
                                                        <input type="hidden" name="idreclamo_complejo_rc[]" id="idreclamo_rc{celda_nume_fila_rc}{celda_nume_celda_rc}" value={idreclamo_complejo_rc} />
                                                        <!-- FIN BLOQUE : idinteraccion_complejo_rc -->
                                                    </td>
                                                    <td id="ereclamo_rc{celda_nume_fila_rc}{celda_nume_celda_rc}">

                                                        <!-- INICIO BLOQUE : eliminar_rc_interaccion -->


                                                        <img src="../../../img/trash.png"  title="Eliminar" alt="Borrar" width="16" height="16" border="0" class="icono" onclick="disminuye_celda('reclamo_rc{celda_nume_fila_rc}{celda_nume_celda_rc}','count_rc')" >
                                                        <!-- FIN BLOQUE : eliminar_rc_interaccion -->

                                                    </td>
                                                    <!-- FIN BLOQUE : td_rc_interaccion -->

                                                </tr>
                                                <!-- FIN BLOQUE : tr_rc_interaccion -->

                                        </table>
                                    </td>
                                    </tr> 
                            <tr id="reclamo_doc" style="display:none;">
                                        
                                        <td>
                                            
                                            <div id="reclamo_archivo">
                                                <div><input type='file' name='archivos[]' >(tama&ntilde;o m&aacute;ximo: {maximo} MB)</div><br/>
                                            </div>
                                            <a href="javascript:agregar_campo_archivo('reclamo')">Adjuntar otro Archivo (+) </a><br/><br/>
                                            <table >
                                             <!-- INICIO BLOQUE : archivo -->
                                             <tr>
                                                 <td id="archivo_{idreclamo_archivo}_{idmodulo_reclamo_archivo}" ><a href="javascript:populateIframe('frame1','reclamo','{ruta}')"  title="Descargar">{archivo}</a></td>
                                                 <td><input type="hidden" name="idreclamo_archivo[]" id="idarchivo_{idreclamo_archivo}_{idmodulo_reclamo_archivo}" value="{idreclamo_archivo}***{idmodulo_reclamo_archivo}***{activo}"/> {fecha}</td>
                                                 <td><img src="../../../img/trash.png"  title="Eliminar" alt="Borrar" width="16" height="16" border="0" class="icono" onclick="disminuye_celda('archivo_{idreclamo_archivo}_{idmodulo_reclamo_archivo}')" ><br/></td></tr>
                                             <!-- FIN BLOQUE : archivo -->
                                            </table>
                                        </td>
                                            
                                    </tr>
                                    <tr id="reclamo_comentario" style="display:none;">
                                        <td class="celda_titulo">Comentario</br>
                                            <textarea name="comentario_reclamo" id="comentario_reclamo" style="width:100%;" rows="5">{comentario_reclamo}</textarea></td>
                                    </tr>
                           
                            <tr>

                                <td colspan="2">
                                    <div class="ui-widget-header ui-corner-all">
                                    <table width="100%">
                                        <td>
                                            <button id="btn_ocultar" onclick="habilitar_registrar_reclamo();return false;" title="Minimizar" style="height: 34px;"></button>
                                            <button id="btn_mostrar_sh" onclick="cambiar_visibilidad('fila_reclamo_sh');return false;" title="SH">SH</button>
                                            <button id="btn_mostrar_rc1" onclick="cambiar_visibilidad('fila_reclamo_rc1');return false;" title="Recibido">Recibido</button>
                                            <button id="btn_mostrar_rc2" onclick="cambiar_visibilidad('fila_reclamo_rc2');return false;" title="Responsable">Responsable</button>
                                            <button id="btn_mostrar_doc" onclick="cambiar_visibilidad('reclamo_doc');return false;" style="height: 34px;" title="Adjuntar"></button>
                                            <button id="btn_mostrar_comentario" onclick="cambiar_visibilidad('reclamo_comentario');return false;" style="height: 34px;" title="Comentario"></button>
                                        </td>
                                        <td align="right">
                                            <input type="hidden" id="reclamo_simple" name="reclamo_simple" value="1" />
                                            <div id="guardar_reclamo_simple">
                                                <input type="submit" name="submitButton" id="reclamo_submit" value="Guardar">
                                                
                                            </div>
                                        </td>
                                        <td>
                                            <!--
                                            <div style="float:right;"><a href="javascript:vista_avanzada_reclamo(1);" onclick="">Vista Avanzada</a></div>
                                            -->
                                        </td>
                                    </table>
                                    </div>
                                </td>
                            </tr>
                        </table>
                    </form>
                </td>
            </tr>
        </table>
        
        </div>

    <div id="bloque_reclamo" style="clear:both;display: block;">
        {tabla_reclamo}
    </div>


    
</div>

<!-- INICIO BLOQUE : crear_reclamo -->
<script type="text/javascript" >
$("#reclamo_stakeholder_simple").html("");
$("#enlace_habilitar_reclamo_simple").html("");
</script>
<!-- FIN BLOQUE : crear_reclamo -->


<script type="text/javascript" >
     $("#buscar_reclamo_tag").blur(function() {
            $("#buscar_reclamo_tag").val("Buscar tag");
        });
    
    $("#reclamo_sh_buscar").blur(function() {
            $("#reclamo_sh_buscar").val("Buscar Reclamante (stakeholder) por apellido paterno apellido materno nombre");
        });
    
    
     $("#reclamo_rc1_buscar").blur(function() {
            $("#reclamo_rc1_buscar").val("Buscar Receptor (relacionista) por apellido nombre");
        });
    
     $("#reclamo_rc2_buscar").blur(function() {
            $("#reclamo_rc2_buscar").val("Buscar Responsable (relacionista) por apellido nombre");
        });
    
    $("#reclamo_submit").button();
    $("#btn_ocultar").button({
                        icons: {
                        primary: "ui-icon-newwin",
                        secondary: "ui-icon-minus"
                        }
                        });
     var btn_mostrar_rc1 = true;
    
    $("#btn_mostrar_rc1").button({
                        icons: {
                        primary: "ui-icon-person",
                        secondary: "ui-icon-plus"
                        }}).click(function() {
                            var options;
                            if ( btn_mostrar_rc1 ) {
                                btn_mostrar_rc1=false;
                                options = {                                    
                                    icons: {
                                    primary: "ui-icon-person",secondary: "ui-icon-minus"
                                    }
                                };
                            } else {
                                btn_mostrar_rc1=true;
                                options = {                                    
                                    icons: {
                                    primary: "ui-icon-person",secondary: "ui-icon-plus"
                                    }
                                };
                            }
                            $( this ).button( "option", options );
                            });
                        
 
   
    var btn_mostrar_rc2 = true;
    
    $("#btn_mostrar_rc2").button({
                        icons: {
                        primary: "ui-icon-person",
                        secondary: "ui-icon-plus"
                        }}).click(function() {
                            var options;
                            if ( btn_mostrar_rc2 ) {
                                btn_mostrar_rc2=false;
                                options = {                                    
                                    icons: {
                                    primary: "ui-icon-person",secondary: "ui-icon-minus"
                                    }
                                };
                            } else {
                                btn_mostrar_rc2=true;
                                options = {                                    
                                    icons: {
                                    primary: "ui-icon-person",secondary: "ui-icon-plus"
                                    }
                                };
                            }
                            $( this ).button( "option", options );
                            });
   
   
    var btn_mostrar_sh = true;
                        
    $("#btn_mostrar_sh").button({
                        icons: {
                        primary: "ui-icon-person",
                        secondary: "ui-icon-plus"
                        }}).click(function() {
                            var options;
                            if ( btn_mostrar_sh ) {
                                btn_mostrar_sh=false;
                                options = {                                    
                                    icons: {
                                    primary: "ui-icon-person",secondary: "ui-icon-minus"
                                    }
                                };
                            } else {
                                btn_mostrar_sh=true;
                                options = {                                    
                                    icons: {
                                    primary: "ui-icon-person",secondary: "ui-icon-plus"
                                    }
                                };
                            }
                            $( this ).button( "option", options );
                            });
                            
   
     var boton_mostrar_doc = true;

    $("#btn_mostrar_doc").button({
                        icons: {
                        primary: "ui-icon-paperclip",
                        secondary: "ui-icon-plus"
                        }
                        }).click(function() {
                            var options;
                            if ( btn_mostrar_doc ) {
                                btn_mostrar_doc=false;
                                options = {                                    
                                    icons: {
                                    primary: "ui-icon-paperclip",secondary: "ui-icon-minus"
                                    }
                                };
                            } else {
                                btn_mostrar_doc=true;
                                options = {                                    
                                    icons: {
                                    primary: "ui-icon-paperclip",secondary: "ui-icon-plus"
                                    }
                                };
                            }
                            $( this ).button( "option", options );
                            });
                            
    var boton_mostrar_comentario = true;
                        
    $("#btn_mostrar_comentario").button({
                        icons: {
                        primary: "ui-icon-comment",
                        secondary: "ui-icon-plus"
                        }
                        }).click(function() {
                            var options;
                            if ( btn_mostrar_comentario ) {
                                btn_mostrar_comentario=false;
                                options = {                                    
                                    icons: {
                                    primary: "ui-icon-comment",secondary: "ui-icon-minus"
                                    }
                                };
                            } else {
                                btn_mostrar_comentario=true;
                                options = {                                    
                                    icons: {
                                    primary: "ui-icon-comment",secondary: "ui-icon-plus"
                                    }
                                };
                            }
                            $( this ).button( "option", options );
                            });
                                
    
    var idpersona = $("#idpersona").val();
    var idmodulo = $("#idmodulo").val();
    var presenta=1;
    
    var url = '../../../programas/reclamo/reclamo/areclamo.php?idpersona=' + idpersona + '&idmodulo=' + idmodulo+ '&presenta=' + presenta;
    
    //datastring = $("#guardar_reclamo_stakeholder").serialize();
    
    //url = url +'&'+datastring;
    
    //alert('URL: '+url);
    $("#guardar_reclamo_stakeholder").attr('action', url); 
    
    $('#guardar_reclamo_stakeholder').ajaxForm({
        beforeSubmit: function() {
            //alert('Submitting...');
            if($("#guardar_reclamo_stakeholder").valid()){
                $("#guardar_reclamo_simple").html('<img src="../../../img/ajax-loader.png">');
           
            }else{
                return false;
            }
            
        },
        success: function(data) {
         var obj = jQuery.parseJSON(data);
          if (obj.success) {
                $('#tabs').tabs('load', 1);
               
                $.jGrowl(obj.mensaje, {theme: 'verde'});
            } else {
                $("#guardar_reclamo_simple").html('<input type="submit" name="submitButton" value="Guardar">');
                $.jGrowl(obj.mensaje, {theme: 'rojo'});

            }
        }
    });


$("#guardar_reclamo_stakeholder").validate({ignore:""});
</script> 

